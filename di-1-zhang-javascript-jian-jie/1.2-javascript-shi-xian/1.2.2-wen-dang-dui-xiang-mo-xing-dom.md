# 1.2.2 文档对象模型（DOM）

文档对象模型（DOM，Document Object Model）是针对 XML 但经过扩展用于 HTML 的应用程序编 程接口（API，Application Programming Interface）。DOM 把整个页面映射为一个多层节点结构。HTML 或 XML 页面中的每个组成部分都是某种类型的节点，这些节点又包含着不同类型的数据。看下面这个 HTML 页面：

```text
<html>
    <head>
        <title>Sample Page</title>
    </head>
    <body>
        <p>Hello World!</p>
    </body>
</html>
```

在 DOM 中，这个页面可以通过图 1-2 所示的分层节点图表示。 

通过 DOM 创建的这个表示文档的树形图，开发人员获得了控制页面内容和结构的主动权。借助 DOM 提供的 API，开发人员可以轻松自如地删除、添加、替换或修改任何节点。

 \# 1. 为什么要使用 DOM 

在 Internet Explorer 4 和 Netscape Navigator 4 分别支持的不同形式的 DHTML（Dynamic HTML）基 础上，开发人员首次无需重新加载网页，就可以修改其外观和内容了。然而，DHTML 在给 Web技术发 展带来巨大进步的同时，也带来了巨大的问题。由于 Netscape 和微软在开发 DHTML 方面各持己见，过 去那个只编写一个 HTML 页面就能够在任何浏览器中运行的时代结束了。

 对开发人员而言，如果想继续保持 Web 跨平台的天性，就必须额外多做一些工作。而人们真正担 心的是，如果不对 Netscape 和微软加以控制，Web 开发领域就会出现技术上两强割据，浏览器互不兼容的局面。此时，负责制定 Web 通信标准的 W3C（World Wide Web Consortium，万维网联盟）开始着 手规划 DOM。

![&#x56FE; 1-2](../../.gitbook/assets/image%20%284%29.png)



## 2. DOM 级别

DOM1 级（DOM Level 1）于 1998 年 10 月成为 W3C 的推荐标准。DOM1 级由两个模块组成：DOM

核心（DOM Core）和 DOM HTML。其中，DOM 核心规定的是如何映射基于 XML 的文档结构，以便

简化对文档中任意部分的访问和操作。DOM HTML 模块则在 DOM 核心的基础上加以扩展，添加了针

对 HTML 的对象和方法。

> 请读者注意，DOM 并不只是针对 JavaScript 的，很多别的语言也都实现了 DOM。 不过，在 Web 浏览器中，基于 ECMAScript 实现的 DOM 的确已经成为 JavaScript 这 门语言的一个重要组成部分。

如果说 DOM1 级的目标主要是映射文档的结构，那么 DOM2 级的目标就要宽泛多了。DOM2 级在 原来 DOM 的基础上又扩充了（DHTML 一直都支持的）鼠标和用户界面事件、范围、遍历（迭代 DOM 文档的方法）等细分模块，而且通过对象接口增加了对 CSS（Cascading Style Sheets，层叠样式表）的 支持。DOM1 级中的 DOM 核心模块也经过扩展开始支持 XML 命名空间。

DOM2 级引入了下列新模块，也给出了众多新类型和新接口的定义。 

* DOM 视图（DOM Views）：定义了跟踪不同文档（例如，应用 CSS 之前和之后的文档）视图的 接口； 
* DOM 事件（DOM Events）：定义了事件和事件处理的接口； 
* DOM 样式（DOM Style）：定义了基于 CSS 为元素应用样式的接口； 
* DOM 遍历和范围（DOM Traversal and Range）：定义了遍历和操作文档树的接口。

DOM3 级则进一步扩展了 DOM，引入了以统一方式加载和保存文档的方法——在 DOM 加载和保 存（DOM Load and Save）模块中定义；新增了验证文档的方法——在 DOM 验证（DOM Validation）模块中定义。DOM3 级也对 DOM 核心进行了扩展，开始支持 XML 1.0 规范，涉及 XML Infoset、XPath 和 XML Base。

> 在阅读 DOM 标准的时候，读者可能会看到 DOM0 级（DOM Level 0）的字眼。 实际上，DOM0 级标准是不存在的；所谓 DOM0 级只是 DOM 历史坐标中的一个参照 点而已。具体说来，DOM0 级指的是 Internet Explorer 4.0 和 Netscape Navigator 4.0最 初支持的 DHTML。



## 3. 其他 DOM 标准

除了 DOM 核心和 DOM HTML 接口之外，另外几种语言还发布了只针对自己的 DOM 标准。下面

列出的语言都是基于 XML 的，每种语言的 DOM 标准都添加了与特定语言相关的新方法和新接口：

* SVG（Scalable Vector Graphic，可伸缩矢量图）1.0；
* MathML（Mathematical Markup Language，数学标记语言）1.0；
* SMIL（Synchronized Multimedia Integration Language，同步多媒体集成语言）。

还有一些语言也开发了自己的 DOM 实现，例如 Mozilla 的 XUL（XML User Interface Language，XML

用户界面语言）。但是，只有上面列出的几种语言是 W3C 的推荐标准。

## 4. Web 浏览器对 DOM 的支持

在 DOM 标准出现了一段时间之后，Web 浏览器才开始实现它。微软在 IE5 中首次尝试实现 DOM，

但直到 IE5.5 才算是真正支持 DOM1 级。在随后的 IE6 和 IE7 中，微软都没有引入新的 DOM 功能，而

到了 IE8 才对以前 DOM 实现中的 bug 进行了修复。

Netscape直到 Netscape 6（Mozilla 0.6.0）才开始支持 DOM。在 Netscape 7之后，Mozilla把开发重心转

向了 Firefox浏览器。Firefox 3完全支持 DOM1级，几乎完全支持 DOM2级，甚至还支持 DOM3级的一部

分。（Mozilla开发团队的目标是构建与标准 100%兼容的浏览器，而他们的努力也得到了回报。）

目前，支持 DOM已经成为浏览器开发商的首要目标，主流浏览器每次发布新版本都会改进对 DOM

的支持。下表列出了主流浏览器对 DOM 标准的支持情况。

![](../../.gitbook/assets/image%20%283%29.png)

